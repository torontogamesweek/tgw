<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toronto Games Week</title>

    <!-- Stylesheets -->
    <link href="styles.css" rel="stylesheet" type="text/css" />
    <link
      href="https://fonts.googleapis.com/css2?family=PT+Mono&display=swap"
      rel="stylesheet"
    />

    <!-- Meta Tags -->
    <meta name="author" content="Marie Claire LeBlanc Flanagan" />
    <meta name="description" content="Celebrating games in Toronto, Canada" />

    <!-- Open Graph Tags -->
    <meta property="og:title" content="Toronto Games Week" />
    <meta
      property="og:description"
      content="Celebrating games in Toronto, Canada"
    />
    <meta
      property="og:image"
      content="https://torontogamesweek.com/images/TGW_Poster_Assets_2025/_Poster.png"
    />
    <meta property="og:url" content="https://torontogamesweek.com" />
    <meta property="og:type" content="webpage" />

    <!-- Twitter Tags -->
    <meta name="twitter:title" content="Toronto Games Week" />
    <meta
      name="twitter:description"
      content="Celebrating games in Toronto, Canada"
    />
    <meta
      name="twitter:image"
      content="images/TGWSocialSmall.png"
      id="indexImage"
    />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Image Specifications -->
    <meta
      property="og:image:alt"
      content="Poster for TGW - an illustration of a magical city with many tiny elements related to Toronto like a racoon, the TTC, and the beach"
    />

    <link
      rel="icon"
      type="image/png"
      href="/favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/favicon/apple-touch-icon.png"
    />
    <link rel="manifest" href="/favicon/site.webmanifest" />

    <style>
      /* Base canvas setup */
      canvas {
        position: absolute; /* Mobile default */
        width: 100%;
        background-image: none;
        height: auto;
        left: 0;
        top: 0;
      }

      .image-container {
        position: relative;
        top: 0;
        left: 0;
        width: 100%;
        height: calc(
          1000px * (9 / 16)
        ); /* Assuming 16:9 aspect ratio, adjust to match actual image ratio */
      }

      main {
        position: relative;
        z-index: 1;
        margin-top: 0;
        background-color: none;
      }

      .contentContainer {
        position: relative;
        z-index: 1;
      }

      /* Content container setup */
      .contentContainer,
      .sponsorBox {
        position: relative;
        z-index: 1;
        pointer-events: none;
      }

      .headerImgDiv {
        z-index: 1;
        pointer-events: none;
        background-color: transparent;
      }

      /* Main content areas */
      .content {
        pointer-events: none;
      }

      .textBox {
        background-color: hsla(0, 0%, 100%, 0.9);
        pointer-events: none;
        /* max-width: 98vw; */
        /* padding: 4rem 10rem; */
      }

      @media (min-width: 768px) {
        .textBox {
          /* padding: 4rem 10rem; */
        }
      }

      /* Re-enable pointer events for specific interactive elements */
      .contentContainer > * .headerImgDiv img,
      .btn,
      .floatingBtn,
      .textBox > * {
        pointer-events: all;
        z-index: 2;
      }

      /* Header */
      header {
        position: fixed;
        width: 100%;
        z-index: 1000;
        top: 0;
        pointer-events: auto;
        height: 4rem;
        margin-top: 0;
      }

      nav,
      nav a {
        pointer-events: auto;
        background-color: white;
      }

      nav ul {
        background-color: rgb(255, 255, 255);
      }

      @media screen and (min-width: 900px) {
      }

      @media (min-width: 768px) {
        header {
          height: 0;
        }

        canvas {
          position: absolute; /* Reset for desktop */
        }

        nav li,
        nav ul,
        nav {
          background-color: rgba(255, 255, 255, 0);
          padding: 10px 10px 0 10px;
        }

        nav {
          margin: 0;
          padding: 0;
          background-color: rgba(255, 255, 255, 0);
        }
        nav a {
          color: rgb(45, 45, 45); /* Adjust based on background */
          text-shadow: 0 0 5px white; /* Soft glow effect */
          background-color: rgba(255, 255, 255, 0);
        }

        nav > ul > li {
          font-size: 1.5rem;
          margin: 0 10px;
        }
        .image-container {
          height: 100vh; /* Reset for desktop */
        }

        main {
          margin-top: 90vh; /* Desktop margin */
        }

        header {
          position: relative;
        }
      }

      /* sponsorbox  */

      .sponsorbox {
        margin: 1rem 0 0 0;
        padding: 0;
        width: 100%;
        display: flex;
        justify-content: center;
      }

      .logo-container {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 1rem;
        justify-items: center;
        align-items: center;
        min-height: 120px;
        max-width: 97rem;
        width: 100%;
      }

      .logo-slot {
        width: 100%;
        height: 140px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo-slot a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
      }

      .logo {
        max-width: 2rem 100%;
        min-height: 90px;
        max-height: 90px;
        width: auto;
        height: auto;
        object-fit: contain;
        opacity: 0;
        transition: opacity 1.2s ease-in-out;
        pointer-events: auto;
        background-color: rgba(255, 255, 255);
        border-radius: 5px;
      }

      .logo-big {
        max-width: 90%;
      }

      .logo.visible {
        opacity: 1;
      }

      /* Mobile styles */
      @media (max-width: 768px) {
        .sponsorBox {
          margin: 4rem 0 0 0;
        }

        .logo-container {
          grid-template-columns: repeat(3, 1fr);
          gap: 1rem;
        }

        .logo-slot {
          width: 100px;
          height: 60px;
        }

        /* Hide slots 4-6 on mobile */
        .logo-slot:nth-child(n + 4) {
          display: none;
        }
      }

      .no-pointer-events {
        pointer-events: none;
      }

      /* Base */
      main {
        position: relative;
        z-index: 1;
        margin-top: 3vh;
      }

      /* Tablet */
      @media (min-width: 768px) {
        main {
          margin-top: 90vh;
        }
      }

      /* desktop size ~1976px */
      @media (min-width: 1900px) {
        main {
          margin-top: 120vh;
        }
      }

      /* Larger monitors */
      @media (min-width: 2500px) {
        main {
          margin-top: 150vh;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <button
        id="nav-toggle"
        aria-expanded="false"
        aria-controls="primary-navigation"
        class="nav-toggle-button"
      >
        <span class="sr-only">Menu</span>
        <span class="icon"></span>
      </button>

      <div></div>
      <nav id="primary-navigation">
        <ul>
          <li>
            <a href="index.html">Home</a>
          </li>
          <li>
            <a href="schedule.html" id="scheduleNav">Schedule</a>
          </li>
          <li>
            <a href="about.html" id="aboutNav">About</a>
          </li>
        </ul>
      </nav>
    </header>

    <div class="image-container">
      <canvas id="myCanvas" width="500" height="400"></canvas>
    </div>
    <main class="no-pointer-events">
      <div class="contentContainer" id="landingPage">
        <!-- <div class="content">
          <section class="textBox">
            <p id="aboutTGW">
            </p>
          </section>
        </div> -->

        <div class="content">
          <section class="textBox">
            <h2>About</h2>
            <p>
              Toronto Games Week (June 12-18, 2025) is a collective coordination
              of events organized independently by dozens of organizations,
              curators, companies, creators, and communities
            </p>
            <br />

            <p>
              Toronto Games Week is coordinated by
              <a href="https://marieflanagan.com/" target="blank"
                >Marie LeBlanc Flanagan</a
              >
              (previously at A MAZE. / Berlin) and
              <a href="https://jimmunroe.net/" target="blank">Jim Munroe</a> (<a
                href="https://gameartsinternational.network/"
                target="blank"
                >Game Arts International Network</a
              >
              executive director and co-founder of the Hand Eye Society).
            </p>
            <br />
            <p>
              TGW emerged with great delight from a number of local people,
              communities, and organizations. It came to life with the support
              of our original group of advisors: a supergroup of game community
              organizations, including representatives from
              <a href="http://www.tojam.ca/" target="blank">Toronto Game Jam</a
              >,
              <a href="https://interactiveontario.com/" target="blank"
                >Interactive Ontario</a
              >,
              <a href="https://bufferfestival.com/" target="blank"
                >Buffer Festival</a
              >,
              <a href="https://vectorfestival.org/" target="blank"
                >Vector Festival</a
              >,
              <a href="https://twitter.com/DMGToronto" target="blank">DMG</a>,
              <a href="https://www.dirty-rectangles.com/" target="blank"
                >Dirty Rectangles</a
              >,
              <a href="https://www.handeyesociety.com/" target="blank"
                >Hand Eye Society</a
              >,
              <a href="https://continueagency.com/" target="blank"
                >Continue Agency</a
              >, and
              <a href="https://twitter.com/FunlandMag" target="blank"
                >Funland Magazine</a
              >. Additional input was given by representatives of
              <a href="https://www.arts.on.ca/home" target="blank"
                >the Ontario Arts Council</a
              >, <a href="https://www.ocadu.ca/" target="blank">OCAD</a>,
              <a href="https://www.tiff.net/" target="blank">TIFF</a>, and
              <a
                href="https://www.toronto.ca/business-economy/industry-sector-support/creative-technology/"
                target="blank"
                >the City of Toronto Creative Technology Office</a
              >.
            </p>
            <br />

            <p>
              Thanks to:
              <a target="_blank" href="https://caitrussell.com/"
                >Caitlin Russell</a
              >
              (poster design and illustration) Matt Hammill (TGW logo), and
              Marisa Ranalli (social media).
            </p>

            <!-- <p>
              Thanks to: Mary Lau (copy editing), Elif Boyacioglu (icon creation), Juan Sebastian Callejas Rodriguez (print schedule design), Matt
              Hammill (TGW logo), Nneka Nnagbo (website assistance), Samira Soltani (social media).
            </p> -->
          </section>
        </div>

        <!-- <div class="content">
        <section class="textBox">
          <h2>Who organizes Toronto Games Week?</h2>

          <p>Each event is independently organized by individual game curators and organizers.</p>
          <br>

      
          
        </section>
      </div> -->

        <div class="content">
          <section class="textBox">
            <h2>Code of Conduct and COVID-19 Policy</h2>

            <p>
              We want people to come to TGW and participate and thrive no matter
              their experience, gender identity and expression, disability,
              sexual orientation, personal appearance, race, ethnicity, body
              size, age, nationality, or religion. Our
              <a href="coc.html" target="blank">Code of Conduct</a> is here.
            </p>
            <br />
            <p>
              Toronto Games Week strongly recommends that attendees bring and
              wear masks. We will have some masks at the door of all events.
              Each TGW event will have its own rules around COVID-19, and that
              information will be clearly communicated in advance on this
              website so people can make informed choices.
            </p>
            <br />

            <p>
              We welcome donations of masks, tests, or loans of air filters to
              make events safer for everyone.
            </p>
            <!-- <p class="btn floatingBtn">
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScjGji3TB0zzj6nC58a31jfvoJIUtbqkPU0Up6BH154-YwHkA/viewform" target="blank"
              >Submit an Event</a
            >
          </p> -->
          </section>
        </div>

        <div class="content">
          <section class="textBox">
            <h2>Organize an event!</h2>

            <p>
              If you’d like to run a TGW event yourself, there’s still time to
              get in on the fun! We’re open to including board/escape
              room/theatrical/LARPing -- playful culture of all sorts, not just
              screen based games!
            </p>

            <p class="btn floatingBtn">
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSfj5hbgpI-ATNYESbEnNVPaAeONATGXkaEzocRHVB-QRziiyA/viewform"
                target="blank"
                >Submit an Event</a
              >
            </p>
          </section>
        </div>
        <div class="content">
          <section class="textBox">
            <h2>Help out</h2>
            <p>
              Would you like to volunteer and help the coalition of community
              organizations and not-for-profits that make it happen? There’s
              lots of interesting things to do!
            </p>
            <p class="btn floatingBtn floatingBtnBlue">
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSct8eZvHVT46la0WTR1Lq1Nx_6KS3dEgumXNNak-TG3MbB0Uw/viewform"
                target="blank"
                >Volunteer</a
              >
            </p>
          </section>
        </div>

        <div class="content">
          <section class="textBox">
            <h2>Keep Updated</h2>
            <p>
              You can follow us on
              <a
                href="https://bsky.app/profile/torontogamesweek.com"
                target="blank"
                >BlueSky</a
              >
              and subscribe to our newsletter:
            </p>
            <div id="newsletterSignup">
              <script
                async
                data-form="be714392-42fd-11ef-8cf4-057b9b18e38a"
                src="https://eocampaign1.com/form/be714392-42fd-11ef-8cf4-057b9b18e38a.js"
              ></script>
            </div>
          </section>
        </div>

        <div class="content">
          <section class="textBox">
            <h2>Reach Out!</h2>
            <p>
              Interested in getting involved? Have questions? Please reach out
              with any questions to
              <a href="mailto:marie@gameartsinternational.network"
                >Marie LeBlanc Flanagan</a
              >.
            </p>
            <br />
          </section>
        </div>
      </div>

      <div id="inventory"></div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const navToggle = document.getElementById("nav-toggle");
        const primaryNav = document.getElementById("primary-navigation");

        navToggle.addEventListener("click", function () {
          const isExpanded = navToggle.getAttribute("aria-expanded") === "true";
          navToggle.setAttribute("aria-expanded", !isExpanded);
          primaryNav.classList.toggle("expanded");
        });
      });
    </script>

    <script>
      const canvas = document.getElementById("myCanvas");
      const ctx = canvas.getContext("2d");

      // Initialize images with null
      const bwImage = new Image();
      const colorImage = new Image();

      let lastX = 0,
        lastY = 0;
      let isFirstTouch = true;
      let particles = [];
      let isFixed = false;
      let scrollTriggerInstance;

      // Responsive image paths based on screen size
      const imagePaths = {
        small: {
          bw: "images/2025/sbw.jpg",
          color: "images/2025/scolour.jpg",
        },
        medium: {
          bw: "images/2025/mbw.jpg",
          color: "images/2025/mcolour.jpg",
        },
        large: {
          bw: "images/2025/lbw.jpg",
          color: "images/2025/lcolour.jpg",
        },
        xlarge: {
          bw: "images/2025/xlbw.jpg",
          color: "images/2025/xlcolour.jpg",
        },
      };

      // Function to determine which image size to load
      function getImageSizeToLoad() {
        const width = window.innerWidth;
        const height = window.innerHeight;

        // For special case like projectors
        if (width >= 3000 || height >= 2000) {
          return "xlarge";
        }
        // For large desktop screens
        else if (width >= 1920 || height >= 1080) {
          return "large";
        }
        // For medium screens (tablets and small laptops)
        else if (width >= 768) {
          return "medium";
        }
        // For mobile screens
        else {
          return "small";
        }
      }

      // Function to load the appropriate images
      function loadAppropriateImages() {
        const sizeToLoad = getImageSizeToLoad();
        console.log(`Loading ${sizeToLoad} images`);

        // Set the appropriate image sources
        bwImage.src = imagePaths[sizeToLoad].bw;
        colorImage.src = imagePaths[sizeToLoad].color;
      }

      function resizeCanvas() {
        // Wait for the image to be loaded
        if (bwImage.complete) {
          canvas.width = window.innerWidth;
          canvas.height =
            bwImage.naturalHeight * (window.innerWidth / bwImage.naturalWidth);
          ctx.drawImage(bwImage, 0, 0, canvas.width, canvas.height);
        }
      }

      gsap.registerPlugin(ScrollTrigger);

      function createScrollTrigger() {
        if (scrollTriggerInstance) {
          scrollTriggerInstance.kill();
        }

        const isDesktop = window.matchMedia("(min-width: 768px)").matches;

        scrollTriggerInstance = ScrollTrigger.create({
          trigger: ".contentContainer",
          start: isDesktop ? "top bottom" : "top 10%",
          end: "bottom top",
          scrub: 2,
          pin: ".image-container",
          pinSpacing: false,
        });
      }

      function getCoords(e) {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.clientX || e.touches?.[0]?.clientX || lastX;
        const clientY = e.clientY || e.touches?.[0]?.clientY || lastY;
        return {
          x: (clientX - rect.left) * (canvas.width / rect.width),
          y: (clientY - rect.top) * (canvas.height / rect.height),
        };
      }

      let eventRef;
      function draw() {
        const coords = getCoords(eventRef);

        if (isFirstTouch) {
          lastX = coords.x;
          lastY = coords.y;
          isFirstTouch = false;
          return;
        }

        ctx.globalCompositeOperation = "destination-out";

        const newParticles = Array(18)
          .fill()
          .map(() => ({
            x: coords.x,
            y: coords.y,
            vx: (Math.random() - 0.5) * 2,
            vy: (Math.random() - 0.5) * 2,
            size: Math.random() * 16 + 2,
            opacity: 0.77,
          }));

        particles.push(...newParticles);

        particles.forEach((p) => {
          p.x += p.vx;
          p.y += p.vy;
          p.opacity *= 0.95;
          ctx.globalAlpha = p.opacity;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();
        });

        particles = particles.filter(
          (p) =>
            p.x > 0 &&
            p.x < canvas.width &&
            p.y > 0 &&
            p.y < canvas.height &&
            p.opacity > 0.01
        );

        ctx.globalCompositeOperation = "destination-over";
        const ratio = colorImage.naturalHeight / colorImage.naturalWidth;
        const width = canvas.width;
        const height = width * ratio;
        ctx.drawImage(colorImage, 0, 0, width, height);

        lastX = coords.x;
        lastY = coords.y;
      }

      // Debounce function for resize events
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Event listeners
      window.addEventListener("load", () => {
        // Initial load of the appropriate images
        loadAppropriateImages();
        createScrollTrigger();
      });

      // Only reload images if screen size category changes
      let currentSizeCategory = getImageSizeToLoad();

      window.addEventListener(
        "resize",
        debounce(() => {
          const newSizeCategory = getImageSizeToLoad();

          // Only reload images if we've crossed a breakpoint
          if (newSizeCategory !== currentSizeCategory) {
            currentSizeCategory = newSizeCategory;
            loadAppropriateImages();
          }

          resizeCanvas();
          createScrollTrigger();
        }, 250)
      );

      let timeoutReference;

      canvas.addEventListener("mousemove", (e) => {
        eventRef = e;
        if (timeoutReference) return;

        timeoutReference = setInterval(() => {
          draw();
        }, 1);
      });
      canvas.addEventListener("touchmove", (e) => {
        eventRef = e;
        if (timeoutReference) return;

        timeoutReference = setInterval(() => {
          draw();
        }, 1);
      });

      window.addEventListener("blur", () => {
        clearInterval(timeoutReference);
        timeoutReference = null;
      });
      canvas.addEventListener("mouseout", () => {
        isFirstTouch = true;
      });
      canvas.addEventListener("touchend", () => {
        isFirstTouch = true;
      });

      // Image load handlers
      bwImage.onload = resizeCanvas;
      colorImage.onload = resizeCanvas;
    </script>
    <script>
      function setupSponsors() {
        const slots = document.querySelectorAll(".logo-slot");
        const logos = [...document.querySelectorAll(".logo-source a")];

        function getVisibleCount() {
          return window.innerWidth <= 768 ? 3 : 6; // 3 on mobile, 6 on desktop
        }

        function updateLogos() {
          const visibleCount = getVisibleCount();
          const selectedLogos = [...logos]
            .sort(() => Math.random() - 0.5)
            .slice(0, visibleCount);

          // First fade out current logos
          slots.forEach((slot) => {
            const currentLogo = slot.querySelector("img");
            if (currentLogo) {
              currentLogo.classList.remove("visible");
            }
          });

          setTimeout(() => {
            slots.forEach((slot, i) => {
              if (selectedLogos[i]) {
                const logo = selectedLogos[i].cloneNode(true);
                slot.innerHTML = "";
                slot.appendChild(logo);
                requestAnimationFrame(() => {
                  logo.querySelector("img").classList.add("visible");
                });
              }
            });
          }, 1200);
        }

        updateLogos();
        setInterval(updateLogos, 6000);

        window.addEventListener(
          "resize",
          debounce(() => {
            updateLogos();
          }, 250)
        );
      }

      document.addEventListener("DOMContentLoaded", setupSponsors);
    </script>
  </body>
</html>
